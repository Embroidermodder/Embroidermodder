\hypertarget{format__pes_8c_source}{}\doxysubsection{format\+\_\+pes.\+c}
\label{format__pes_8c_source}\index{extern/libembroidery/src/formats/format\_pes.c@{extern/libembroidery/src/formats/format\_pes.c}}
\mbox{\hyperlink{format__pes_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00001}00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00002}00002\ \textcolor{comment}{\ *\ PES\ FORMAT}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00003}00003\ \textcolor{comment}{\ *\ This\ file\ is\ part\ of\ libembroidery.}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00004}00004\ \textcolor{comment}{\ *}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00005}00005\ \textcolor{comment}{\ *\ Copyright\ 2018-\/2023\ The\ Embroidermodder\ Team}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00006}00006\ \textcolor{comment}{\ *\ Licensed\ under\ the\ terms\ of\ the\ zlib\ license.}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00007}00007\ \textcolor{comment}{\ */}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00008}00008\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00009}00009\ \textcolor{preprocessor}{\#include\ <stdio.h>}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00010}00010\ \textcolor{preprocessor}{\#include\ <math.h>}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00011}00011\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00012}00012\ \textcolor{preprocessor}{\#include\ "{}../embroidery\_internal.h"{}}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00013}00013\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00014}\mbox{\hyperlink{format__pes_8c_aaefcb92fcd9151d360eaa1c6cd654f70}{00014}}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *\mbox{\hyperlink{format__pes_8c_aaefcb92fcd9151d360eaa1c6cd654f70}{pes\_version\_strings}}[]\ =\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00015}00015\ \ \ \ \ \textcolor{stringliteral}{"{}\#PES0001"{}},}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00016}00016\ \ \ \ \ \textcolor{stringliteral}{"{}\#PES0020"{}},}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00017}00017\ \ \ \ \ \textcolor{stringliteral}{"{}\#PES0022"{}},}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00018}00018\ \ \ \ \ \textcolor{stringliteral}{"{}\#PES0030"{}},}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00019}00019\ \ \ \ \ \textcolor{stringliteral}{"{}\#PES0040"{}},}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00020}00020\ \ \ \ \ \textcolor{stringliteral}{"{}\#PES0050"{}},}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00021}00021\ \ \ \ \ \textcolor{stringliteral}{"{}\#PES0055"{}},}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00022}00022\ \ \ \ \ \textcolor{stringliteral}{"{}\#PES0056"{}},}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00023}00023\ \ \ \ \ \textcolor{stringliteral}{"{}\#PES0060"{}},}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00024}00024\ \ \ \ \ \textcolor{stringliteral}{"{}\#PES0070"{}},}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00025}00025\ \ \ \ \ \textcolor{stringliteral}{"{}\#PES0080"{}},}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00026}00026\ \ \ \ \ \textcolor{stringliteral}{"{}\#PES0090"{}},}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00027}00027\ \ \ \ \ \textcolor{stringliteral}{"{}\#PES0100"{}},}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00028}00028\ \};}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00029}00029\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00030}00030\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00031}00031\ \textcolor{comment}{/*\ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/\ */}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00032}00032\ \textcolor{comment}{/*\ format\ pes\ */}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00033}00033\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00034}\mbox{\hyperlink{format__pes_8c_a62b3e1b23c769c2aa14a28db1b06a093}{00034}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{format__pes_8c_a62b3e1b23c769c2aa14a28db1b06a093}{pes\_version}}\ =\ \mbox{\hyperlink{embroidery__internal_8h_ad8269e01d50147da8708bf28eb02cd5c}{PES0001}};}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00035}00035\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00036}00036\ \textcolor{keywordtype}{char}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00037}\mbox{\hyperlink{embroidery__internal_8h_a21aba667fce5f4492d9ed1f418141a4f}{00037}}\ \mbox{\hyperlink{format__pes_8c_a21aba667fce5f4492d9ed1f418141a4f}{readPes}}(\mbox{\hyperlink{struct_emb_pattern__}{EmbPattern}}*\ pattern,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *fileName,\ FILE*\ file)}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00038}00038\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00039}00039\ \ \ \ \ \textcolor{keywordtype}{int}\ pecstart,\ numColors,\ x,\ version,\ i;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00040}00040\ \ \ \ \ \textcolor{keywordtype}{char}\ signature[9];}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00041}00041\ \ \ \ \ fread(signature,\ 1,\ 8,\ file);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00042}00042\ \ \ \ \ signature[8]\ =\ 0;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00043}00043\ \ \ \ \ \mbox{\hyperlink{embroidery__internal_8h_ac14e60a4d0a0fae16f22ccbbb2373e2a}{embInt\_read}}(file,\ \textcolor{stringliteral}{"{}pecstart"{}},\ \&pecstart,\ \mbox{\hyperlink{embroidery__internal_8h_adf5a6371ed3ee9d649f92592139ac6a1}{EMB\_INT32\_LITTLE}});}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00044}00044\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00045}00045\ \ \ \ \ version\ =\ 0;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00046}00046\ \ \ \ \ \textcolor{keywordflow}{for}\ (i=0;\ i<\mbox{\hyperlink{embroidery__internal_8h_aa6660609be834a61c2f9a4aa3e550703}{N\_PES\_VERSIONS}};\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00047}00047\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!strcmp(signature,\ \mbox{\hyperlink{format__pes_8c_aaefcb92fcd9151d360eaa1c6cd654f70}{pes\_version\_strings}}[i]))\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00048}00048\ \ \ \ \ \ \ \ \ \ \ \ \ version\ =\ i;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00049}00049\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00050}00050\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00051}00051\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00052}00052\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00053}00053\ \ \ \ \ \textcolor{keywordflow}{if}\ (version\ >=\ \mbox{\hyperlink{embroidery__internal_8h_a4c14130d2f17b639d0bbd26357a047cc}{PES0040}})\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00054}00054\ \ \ \ \ \ \ \ \ fseek(file,\ 4,\ SEEK\_CUR);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00055}00055\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{format__pes_8c_aff679f3398437d61646662fbd4bca061}{readDescriptions}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00056}00056\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00057}00057\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00058}00058\ \ \ \ \ \textcolor{keywordflow}{switch}\ (version)\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00059}00059\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{embroidery__internal_8h_afbeefb5838d9b648cde4eb4dc2eee49c}{PES0100}}:}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00060}00060\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{format__pes_8c_aa6678c8d94b8da627da1df79854c738c}{readPESHeaderV10}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00061}00061\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00062}00062\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{embroidery__internal_8h_abfd9d5072efff09ac8e3a3ffd3edfeff}{PES0090}}:}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00063}00063\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{format__pes_8c_ac302af7f4bb37d91d46e586d66cdde61}{readPESHeaderV9}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00064}00064\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00065}00065\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{embroidery__internal_8h_ad04dfd4ff31d4060b35b265d143b5141}{PES0080}}:}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00066}00066\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{format__pes_8c_a02acda8d5a95508fa005c0d775ca42a0}{readPESHeaderV8}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00067}00067\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00068}00068\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{embroidery__internal_8h_a4d9bfee7c0c6ab1ceccb103973230222}{PES0070}}:}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00069}00069\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{format__pes_8c_a18d87163e82fb0fdca61ea4ebe3ab21a}{readPESHeaderV7}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00070}00070\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00071}00071\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{embroidery__internal_8h_a5d824760a737c1f05ecff47f8fee20bd}{PES0060}}:}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00072}00072\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{format__pes_8c_aeb553d48f0a3b12d87f298d084b56253}{readPESHeaderV6}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00073}00073\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00074}00074\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{embroidery__internal_8h_a64c2754fd61fd2cac87222f66992a522}{PES0056}}:}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00075}00075\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{embroidery__internal_8h_a5e1f6d264120d4c5b8e908d275b56db9}{PES0055}}:}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00076}00076\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{embroidery__internal_8h_aab98b33a4be7ebe0a01c8b7bb916a0a1}{PES0050}}:}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00077}00077\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{format__pes_8c_a80e9341e7b138005b46a14d192742d3e}{readPESHeaderV5}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00078}00078\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00079}00079\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00080}00080\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00081}00081\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00082}00082\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00083}00083\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{embroidery_8h_a3e3a5b8efffea93c4268a39ee5690098}{emb\_verbose}}>1)\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00084}00084\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}debug\ information\ for\ reading\ fileName:\ \%s\(\backslash\)n"{}},\ fileName);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00085}00085\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}pecstart\ =\ \%d\(\backslash\)n"{}},\ pecstart);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00086}00086\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00087}00087\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00088}00088\ \ \ \ \ \textcolor{comment}{/*\ fseek(file,\ pecstart\ +\ 48,\ SEEK\_SET);}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00089}00089\ \textcolor{comment}{\ \ \ \ \ *\ This\ seems\ wrong\ based\ on\ the\ readPESHeader\ functions.\ */}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00090}00090\ \ \ \ \ fseek(file,\ pecstart,\ SEEK\_SET);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00091}00091\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00092}00092\ \ \ \ \ numColors\ =\ fgetc(file)\ +\ 1;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00093}00093\ \ \ \ \ \textcolor{keywordflow}{for}\ (x\ =\ 0;\ x\ <\ numColors;\ x++)\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00094}00094\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ color\_index\ =\ fgetc(file);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00095}00095\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (color\_index\ >=\ \mbox{\hyperlink{embroidery_8h_a0ddaecc4fc077a3db30ea5ffd20ac823}{pecThreadCount}})\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00096}00096\ \ \ \ \ \ \ \ \ \ \ \ \ color\_index\ =\ 0;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00097}00097\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00098}00098\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{embroidery_8h_a1b281916881a27935b9e1f6bcffb2087}{embPattern\_addThread}}(pattern,\ \mbox{\hyperlink{embroidery_8h_acd4ee62733d77dd5fb6d73cd5dab495d}{pecThreads}}[color\_index]);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00099}00099\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00100}00100\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00101}00101\ \ \ \ \ fseek(file,\ pecstart\ +\ 528,\ SEEK\_SET);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00102}00102\ \ \ \ \ \mbox{\hyperlink{embroidery__internal_8h_ab4e327e66e701633f888a6d2cc855126}{readPecStitches}}(pattern,\ file);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00103}00103\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00104}00104\ \ \ \ \ \mbox{\hyperlink{embroidery_8h_a1845b61574f492a6dbef5fd6401ae4a2}{embPattern\_flipVertical}}(pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00105}00105\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00106}00106\ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00107}00107\ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00108}00108\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00109}00109\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00110}\mbox{\hyperlink{embroidery__internal_8h_aff679f3398437d61646662fbd4bca061}{00110}}\ \mbox{\hyperlink{format__pes_8c_aff679f3398437d61646662fbd4bca061}{readDescriptions}}(FILE\ *file,\ \mbox{\hyperlink{struct_emb_pattern__}{EmbPattern}}*\ pattern)}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00111}00111\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00112}00112\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{embroidery_8h_a3e3a5b8efffea93c4268a39ee5690098}{emb\_verbose}}\ >\ 1)\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00113}00113\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}Called\ with:\ (\%p,\ \%p)"{}},\ (\textcolor{keywordtype}{void}*)file,\ (\textcolor{keywordtype}{void}*)pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00114}00114\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00115}00115\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00116}00116\ \textcolor{comment}{\ \ \ \ int\ DesignStringLength;}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00117}00117\ \textcolor{comment}{\ \ \ \ int\ categoryStringLength;}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00118}00118\ \textcolor{comment}{\ \ \ \ int\ authorStringLength;}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00119}00119\ \textcolor{comment}{\ \ \ \ int\ keywordsStringLength;}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00120}00120\ \textcolor{comment}{\ \ \ \ int\ commentsStringLength;}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00121}00121\ \textcolor{comment}{\ \ \ \ DesignStringLength\ =\ fgetc();}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00122}00122\ \textcolor{comment}{\ \ \ \ String\ DesignName\ =\ readString(DesignStringLength);}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00123}00123\ \textcolor{comment}{\ \ \ \ pattern.setName(DesignName);}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00124}00124\ \textcolor{comment}{\ \ \ \ categoryStringLength\ =\ fgetc();}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00125}00125\ \textcolor{comment}{\ \ \ \ String\ Category\ =\ readString(categoryStringLength);}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00126}00126\ \textcolor{comment}{\ \ \ \ pattern.setCategory(Category);}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00127}00127\ \textcolor{comment}{\ \ \ \ authorStringLength\ =\ fgetc();}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00128}00128\ \textcolor{comment}{\ \ \ \ String\ Author\ =\ readString(authorStringLength);}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00129}00129\ \textcolor{comment}{\ \ \ \ pattern.setAuthor(Author);}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00130}00130\ \textcolor{comment}{\ \ \ \ keywordsStringLength\ =\ fgetc();}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00131}00131\ \textcolor{comment}{\ \ \ \ String\ keywords\ =\ readString(keywordsStringLength);}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00132}00132\ \textcolor{comment}{\ \ \ \ pattern.setKeywords(keywords);}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00133}00133\ \textcolor{comment}{\ \ \ \ commentsStringLength\ =\ fgetc();}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00134}00134\ \textcolor{comment}{\ \ \ \ String\ Comments\ =\ readString(commentsStringLength);}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00135}00135\ \textcolor{comment}{\ \ \ \ pattern.setComments(Comments);}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00136}00136\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00137}00137\ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00138}00138\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00139}00139\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00140}\mbox{\hyperlink{embroidery__internal_8h_a80e9341e7b138005b46a14d192742d3e}{00140}}\ \mbox{\hyperlink{format__pes_8c_a80e9341e7b138005b46a14d192742d3e}{readPESHeaderV5}}(FILE\ *file,\ \mbox{\hyperlink{struct_emb_pattern__}{EmbPattern}}*\ pattern)}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00141}00141\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00142}00142\ \ \ \ \ \textcolor{keywordtype}{int}\ fromImageStringLength;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00143}00143\ \ \ \ \ fseek(file,\ 24,\ SEEK\_CUR);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00144}00144\ \ \ \ \ fromImageStringLength\ =\ fgetc(file);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00145}00145\ \ \ \ \ fseek(file,\ fromImageStringLength,\ SEEK\_CUR);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00146}00146\ \ \ \ \ fseek(file,\ 24,\ SEEK\_CUR);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00147}00147\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_ab8d3fdac005d8603f800739d21fc20c6}{readProgrammableFills}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00148}00148\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_a84e2f3d90de6e0d818201914aa1eea0d}{readMotifPatterns}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00149}00149\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_ae3a86c067644ce5f2e59c80ebae6f62e}{readFeatherPatterns}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00150}00150\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_a364fddf45e198a6aa8333e5867af3cc8}{readThreads}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00151}00151\ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00152}00152\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00153}00153\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00154}\mbox{\hyperlink{embroidery__internal_8h_aeb553d48f0a3b12d87f298d084b56253}{00154}}\ \mbox{\hyperlink{format__pes_8c_aeb553d48f0a3b12d87f298d084b56253}{readPESHeaderV6}}(FILE\ *file,\ \mbox{\hyperlink{struct_emb_pattern__}{EmbPattern}}*\ pattern)}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00155}00155\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00156}00156\ \ \ \ \ fseek(file,\ 36,\ SEEK\_CUR);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00157}00157\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_ae47870c204671ff825f47b788c70cf3e}{readImageString}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00158}00158\ \ \ \ \ fseek(file,\ 24,\ SEEK\_CUR);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00159}00159\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_ab8d3fdac005d8603f800739d21fc20c6}{readProgrammableFills}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00160}00160\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_a84e2f3d90de6e0d818201914aa1eea0d}{readMotifPatterns}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00161}00161\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_ae3a86c067644ce5f2e59c80ebae6f62e}{readFeatherPatterns}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00162}00162\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_a364fddf45e198a6aa8333e5867af3cc8}{readThreads}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00163}00163\ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00164}00164\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00165}00165\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00166}\mbox{\hyperlink{embroidery__internal_8h_a18d87163e82fb0fdca61ea4ebe3ab21a}{00166}}\ \mbox{\hyperlink{format__pes_8c_a18d87163e82fb0fdca61ea4ebe3ab21a}{readPESHeaderV7}}(FILE\ *file,\ \mbox{\hyperlink{struct_emb_pattern__}{EmbPattern}}*\ pattern)}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00167}00167\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00168}00168\ \ \ \ \ fseek(file,\ 36,\ SEEK\_CUR);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00169}00169\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_ae47870c204671ff825f47b788c70cf3e}{readImageString}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00170}00170\ \ \ \ \ fseek(file,\ 24,\ SEEK\_CUR);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00171}00171\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_ab8d3fdac005d8603f800739d21fc20c6}{readProgrammableFills}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00172}00172\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_a84e2f3d90de6e0d818201914aa1eea0d}{readMotifPatterns}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00173}00173\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_ae3a86c067644ce5f2e59c80ebae6f62e}{readFeatherPatterns}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00174}00174\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_a364fddf45e198a6aa8333e5867af3cc8}{readThreads}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00175}00175\ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00176}00176\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00177}00177\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00178}\mbox{\hyperlink{embroidery__internal_8h_a02acda8d5a95508fa005c0d775ca42a0}{00178}}\ \mbox{\hyperlink{format__pes_8c_a02acda8d5a95508fa005c0d775ca42a0}{readPESHeaderV8}}(FILE\ *file,\ \mbox{\hyperlink{struct_emb_pattern__}{EmbPattern}}*\ pattern)}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00179}00179\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00180}00180\ \ \ \ \ fseek(file,\ 38,\ SEEK\_CUR);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00181}00181\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_ae47870c204671ff825f47b788c70cf3e}{readImageString}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00182}00182\ \ \ \ \ fseek(file,\ 26,\ SEEK\_CUR);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00183}00183\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_ab8d3fdac005d8603f800739d21fc20c6}{readProgrammableFills}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00184}00184\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_a84e2f3d90de6e0d818201914aa1eea0d}{readMotifPatterns}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00185}00185\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_ae3a86c067644ce5f2e59c80ebae6f62e}{readFeatherPatterns}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00186}00186\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_a364fddf45e198a6aa8333e5867af3cc8}{readThreads}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00187}00187\ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00188}00188\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00189}00189\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00190}\mbox{\hyperlink{embroidery__internal_8h_ac302af7f4bb37d91d46e586d66cdde61}{00190}}\ \mbox{\hyperlink{format__pes_8c_ac302af7f4bb37d91d46e586d66cdde61}{readPESHeaderV9}}(FILE\ *file,\ \mbox{\hyperlink{struct_emb_pattern__}{EmbPattern}}*\ pattern)}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00191}00191\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00192}00192\ \ \ \ \ fseek(file,\ 14,\ SEEK\_CUR);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00193}00193\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_ad8002a7b6d42d6d116f31943ea1f8d37}{readHoopName}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00194}00194\ \ \ \ \ fseek(file,\ 30,\ SEEK\_CUR);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00195}00195\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_ae47870c204671ff825f47b788c70cf3e}{readImageString}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00196}00196\ \ \ \ \ fseek(file,\ 34,\ SEEK\_CUR);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00197}00197\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_ab8d3fdac005d8603f800739d21fc20c6}{readProgrammableFills}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00198}00198\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_a84e2f3d90de6e0d818201914aa1eea0d}{readMotifPatterns}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00199}00199\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_ae3a86c067644ce5f2e59c80ebae6f62e}{readFeatherPatterns}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00200}00200\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_a364fddf45e198a6aa8333e5867af3cc8}{readThreads}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00201}00201\ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00202}00202\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00203}00203\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00204}\mbox{\hyperlink{embroidery__internal_8h_aa6678c8d94b8da627da1df79854c738c}{00204}}\ \mbox{\hyperlink{format__pes_8c_aa6678c8d94b8da627da1df79854c738c}{readPESHeaderV10}}(FILE\ *file,\ \mbox{\hyperlink{struct_emb_pattern__}{EmbPattern}}*\ pattern)}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00205}00205\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00206}00206\ \ \ \ \ fseek(file,\ 14,\ SEEK\_CUR);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00207}00207\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_ad8002a7b6d42d6d116f31943ea1f8d37}{readHoopName}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00208}00208\ \ \ \ \ fseek(file,\ 38,\ SEEK\_CUR);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00209}00209\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_ae47870c204671ff825f47b788c70cf3e}{readImageString}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00210}00210\ \ \ \ \ fseek(file,\ 34,\ SEEK\_CUR);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00211}00211\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_ab8d3fdac005d8603f800739d21fc20c6}{readProgrammableFills}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00212}00212\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_a84e2f3d90de6e0d818201914aa1eea0d}{readMotifPatterns}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00213}00213\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_ae3a86c067644ce5f2e59c80ebae6f62e}{readFeatherPatterns}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00214}00214\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_a364fddf45e198a6aa8333e5867af3cc8}{readThreads}}(file,\ pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00215}00215\ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00216}00216\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00217}00217\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00218}\mbox{\hyperlink{embroidery__internal_8h_ad8002a7b6d42d6d116f31943ea1f8d37}{00218}}\ \mbox{\hyperlink{format__pes_8c_ad8002a7b6d42d6d116f31943ea1f8d37}{readHoopName}}(FILE*\ file,\ \mbox{\hyperlink{struct_emb_pattern__}{EmbPattern}}*\ pattern)}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00219}00219\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00220}00220\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{embroidery_8h_a3e3a5b8efffea93c4268a39ee5690098}{emb\_verbose}}\ >\ 1)\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00221}00221\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}Called\ with:\ (\%p,\ \%p)"{}},\ (\textcolor{keywordtype}{void}*)file,\ (\textcolor{keywordtype}{void}*)pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00222}00222\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00223}00223\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00224}00224\ \textcolor{comment}{\ \ \ \ int\ hoopNameStringLength\ =\ fgetc(file);}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00225}00225\ \textcolor{comment}{\ \ \ \ String\ hoopNameString\ =\ readString(hoopNameStringLength);}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00226}00226\ \textcolor{comment}{\ \ \ \ if\ (hoopNameString.length()\ !=\ 0)\ \{}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00227}00227\ \textcolor{comment}{\ \ \ \ \ \ \ \ pattern.setMetadata("{}hoop\_name"{},\ hoopNameString);}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00228}00228\ \textcolor{comment}{\ \ \ \ \}}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00229}00229\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00230}00230\ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00231}00231\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00232}00232\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00233}\mbox{\hyperlink{embroidery__internal_8h_ae47870c204671ff825f47b788c70cf3e}{00233}}\ \mbox{\hyperlink{format__pes_8c_ae47870c204671ff825f47b788c70cf3e}{readImageString}}(FILE*\ file,\ \mbox{\hyperlink{struct_emb_pattern__}{EmbPattern}}*\ pattern)}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00234}00234\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00235}00235\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{embroidery_8h_a3e3a5b8efffea93c4268a39ee5690098}{emb\_verbose}}\ >\ 1)\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00236}00236\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}Called\ with:\ (\%p,\ \%p)"{}},\ (\textcolor{keywordtype}{void}*)file,\ (\textcolor{keywordtype}{void}*)pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00237}00237\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00238}00238\ \ \ \ \ \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00239}00239\ \textcolor{comment}{\ \ \ \ int\ fromImageStringLength\ =\ fgetc(file);}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00240}00240\ \textcolor{comment}{\ \ \ \ String\ fromImageString\ =\ readString(fromImageStringLength);}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00241}00241\ \textcolor{comment}{\ \ \ \ if\ (fromImageString.length()\ !=\ 0)\ \{}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00242}00242\ \textcolor{comment}{\ \ \ \ \ \ \ \ pattern.setMetadata("{}image\_file"{},\ fromImageString);}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00243}00243\ \textcolor{comment}{\ \ \ \ \}}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00244}00244\ \textcolor{comment}{\ \ \ \ */}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00245}00245\ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00246}00246\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00247}00247\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00248}\mbox{\hyperlink{embroidery__internal_8h_ab8d3fdac005d8603f800739d21fc20c6}{00248}}\ \mbox{\hyperlink{format__pes_8c_ab8d3fdac005d8603f800739d21fc20c6}{readProgrammableFills}}(FILE*\ file,\ \mbox{\hyperlink{struct_emb_pattern__}{EmbPattern}}*\ pattern)}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00249}00249\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00250}00250\ \ \ \ \ \textcolor{keywordtype}{int}\ numberOfProgrammableFillPatterns;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00251}00251\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{embroidery_8h_a3e3a5b8efffea93c4268a39ee5690098}{emb\_verbose}}\ >\ 1)\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00252}00252\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}Called\ with:\ (\%p,\ \%p)"{}},\ (\textcolor{keywordtype}{void}*)file,\ (\textcolor{keywordtype}{void}*)pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00253}00253\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00254}00254\ \ \ \ \ numberOfProgrammableFillPatterns\ =\ \mbox{\hyperlink{embroidery__internal_8h_a15c50a3a26d0d120fe31f54313984185}{fread\_int16}}(file);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00255}00255\ \ \ \ \ \textcolor{keywordflow}{if}\ (numberOfProgrammableFillPatterns\ !=\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00256}00256\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00257}00257\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00258}00258\ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00259}00259\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00260}00260\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00261}\mbox{\hyperlink{embroidery__internal_8h_a84e2f3d90de6e0d818201914aa1eea0d}{00261}}\ \mbox{\hyperlink{format__pes_8c_a84e2f3d90de6e0d818201914aa1eea0d}{readMotifPatterns}}(FILE*\ file,\ \mbox{\hyperlink{struct_emb_pattern__}{EmbPattern}}*\ pattern)}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00262}00262\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00263}00263\ \ \ \ \ \textcolor{keywordtype}{int}\ numberOfMotifPatterns;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00264}00264\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{embroidery_8h_a3e3a5b8efffea93c4268a39ee5690098}{emb\_verbose}}\ >\ 1)\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00265}00265\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}Called\ with:\ (\%p,\ \%p)"{}},\ (\textcolor{keywordtype}{void}*)file,\ (\textcolor{keywordtype}{void}*)pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00266}00266\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00267}00267\ \ \ \ \ numberOfMotifPatterns\ =\ \mbox{\hyperlink{embroidery__internal_8h_a15c50a3a26d0d120fe31f54313984185}{fread\_int16}}(file);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00268}00268\ \ \ \ \ \textcolor{keywordflow}{if}\ (numberOfMotifPatterns\ !=\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00269}00269\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00270}00270\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00271}00271\ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00272}00272\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00273}00273\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00274}\mbox{\hyperlink{embroidery__internal_8h_ae3a86c067644ce5f2e59c80ebae6f62e}{00274}}\ \mbox{\hyperlink{format__pes_8c_ae3a86c067644ce5f2e59c80ebae6f62e}{readFeatherPatterns}}(FILE*\ file,\ \mbox{\hyperlink{struct_emb_pattern__}{EmbPattern}}*\ pattern)}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00275}00275\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00276}00276\ \ \ \ \ \textcolor{keywordtype}{int}\ featherPatternCount;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00277}00277\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{embroidery_8h_a3e3a5b8efffea93c4268a39ee5690098}{emb\_verbose}}\ >\ 1)\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00278}00278\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}Called\ with:\ (\%p,\ \%p)"{}},\ (\textcolor{keywordtype}{void}*)file,\ (\textcolor{keywordtype}{void}*)pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00279}00279\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00280}00280\ \ \ \ \ featherPatternCount\ =\ \mbox{\hyperlink{embroidery__internal_8h_a15c50a3a26d0d120fe31f54313984185}{fread\_int16}}(file);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00281}00281\ \ \ \ \ \textcolor{keywordflow}{if}\ (featherPatternCount\ !=\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00282}00282\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00283}00283\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00284}00284\ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00285}00285\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00286}00286\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00287}\mbox{\hyperlink{embroidery__internal_8h_a364fddf45e198a6aa8333e5867af3cc8}{00287}}\ \mbox{\hyperlink{format__pes_8c_a364fddf45e198a6aa8333e5867af3cc8}{readThreads}}(FILE*\ file,\ \mbox{\hyperlink{struct_emb_pattern__}{EmbPattern}}*\ pattern)}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00288}00288\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00289}00289\ \ \ \ \ \textcolor{keywordtype}{int}\ numberOfColors,\ i;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00290}00290\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{embroidery_8h_a3e3a5b8efffea93c4268a39ee5690098}{emb\_verbose}}\ >\ 1)\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00291}00291\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}Called\ with:\ (\%p,\ \%p)"{}},\ (\textcolor{keywordtype}{void}*)file,\ (\textcolor{keywordtype}{void}*)pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00292}00292\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00293}00293\ \ \ \ \ numberOfColors\ =\ \mbox{\hyperlink{embroidery__internal_8h_a15c50a3a26d0d120fe31f54313984185}{fread\_int16}}(file);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00294}00294\ \ \ \ \ \textcolor{keywordflow}{for}\ (i=0;\ i<numberOfColors;\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00295}00295\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_emb_thread__}{EmbThread}}\ thread;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00296}00296\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ color\_code\_length;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00297}00297\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ descriptionStringLength;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00298}00298\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ brandStringLength;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00299}00299\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ threadChartStringLength;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00300}00300\ \ \ \ \ \ \ \ \ color\_code\_length\ =\ fgetc(file);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00301}00301\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ strcpy(thread.color\_code,\ readString(color\_code\_length));\ */}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00302}00302\ \ \ \ \ \ \ \ \ thread.\mbox{\hyperlink{struct_emb_thread___a5b70f2bf502560229b7fecf8984e33e9}{color}}.\mbox{\hyperlink{struct_emb_color___afd7b1ea9ff115205b65e0bffc92946ac}{r}}\ =\ fgetc(file);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00303}00303\ \ \ \ \ \ \ \ \ thread.\mbox{\hyperlink{struct_emb_thread___a5b70f2bf502560229b7fecf8984e33e9}{color}}.\mbox{\hyperlink{struct_emb_color___a83576af39a9f289a28c1263d61073508}{g}}\ =\ fgetc(file);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00304}00304\ \ \ \ \ \ \ \ \ thread.\mbox{\hyperlink{struct_emb_thread___a5b70f2bf502560229b7fecf8984e33e9}{color}}.\mbox{\hyperlink{struct_emb_color___a41cede1b4c0d05cff170ad5761f70964}{b}}\ =\ fgetc(file);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00305}00305\ \ \ \ \ \ \ \ \ fseek(file,\ 5,\ SEEK\_CUR);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00306}00306\ \ \ \ \ \ \ \ \ descriptionStringLength\ =\ fgetc(file);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00307}00307\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ strcpy(thread.description,\ readString(descriptionStringLength));\ */}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00308}00308\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00309}00309\ \ \ \ \ \ \ \ \ brandStringLength\ =\ fgetc(file);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00310}00310\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ strcpy(thread.brand,\ readString(brandStringLength));\ */}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00311}00311\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00312}00312\ \ \ \ \ \ \ \ \ threadChartStringLength\ =\ fgetc(file);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00313}00313\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ strcpy(thread.threadChart,\ readString(threadChartStringLength));\ */}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00314}00314\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00315}00315\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{embroidery_8h_a3e3a5b8efffea93c4268a39ee5690098}{emb\_verbose}}\ >\ 1)\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00316}00316\ \ \ \ \ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}color\ code\ length:\ \%d\(\backslash\)n"{}},\ color\_code\_length);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00317}00317\ \ \ \ \ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}description\ string\ length:\ \%d\(\backslash\)n"{}},\ descriptionStringLength);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00318}00318\ \ \ \ \ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}brand\ string\ length:\ \%d\(\backslash\)n"{}},\ brandStringLength);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00319}00319\ \ \ \ \ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}thread\ chart\ string\ length:\ \%d\(\backslash\)n"{}},\ threadChartStringLength);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00320}00320\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00321}00321\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{embroidery_8h_a1b281916881a27935b9e1f6bcffb2087}{embPattern\_addThread}}(pattern,\ thread);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00322}00322\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00323}00323\ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00324}00324\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00325}00325\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00326}00326\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00327}\mbox{\hyperlink{format__pes_8c_a084b69b38d9bb8f211f2899be34ff889}{00327}}\ \mbox{\hyperlink{format__pes_8c_a084b69b38d9bb8f211f2899be34ff889}{pesWriteSewSegSection}}(\mbox{\hyperlink{struct_emb_pattern__}{EmbPattern}}*\ pattern,\ FILE*\ file)\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00328}00328\ \ \ \ \ \textcolor{comment}{/*\ TODO:\ pointer\ safety\ */}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00329}00329\ \ \ \ \ \textcolor{keywordtype}{short}*\ colorInfo\ =\ 0;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00330}00330\ \ \ \ \ \textcolor{keywordtype}{int}\ flag\ =\ 0;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00331}00331\ \ \ \ \ \textcolor{keywordtype}{int}\ count\ =\ 0;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00332}00332\ \ \ \ \ \textcolor{keywordtype}{int}\ colorCode\ =\ -\/1;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00333}00333\ \ \ \ \ \textcolor{keywordtype}{int}\ stitchType\ =\ 0;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00334}00334\ \ \ \ \ \textcolor{keywordtype}{int}\ blockCount\ =\ 0;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00335}00335\ \ \ \ \ \textcolor{keywordtype}{int}\ colorCount\ =\ 0;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00336}00336\ \ \ \ \ \textcolor{keywordtype}{int}\ newColorCode\ =\ 0;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00337}00337\ \ \ \ \ \textcolor{keywordtype}{int}\ colorInfoIndex\ =\ 0;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00338}00338\ \ \ \ \ \textcolor{keywordtype}{int}\ i,\ j;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00339}00339\ \ \ \ \ \mbox{\hyperlink{struct_emb_rect__}{EmbRect}}\ bounds\ =\ \mbox{\hyperlink{embroidery_8h_a2c98adbce5554d426cc190eb7659e82c}{embPattern\_calcBoundingBox}}(pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00340}00340\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00341}00341\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ pattern-\/>\mbox{\hyperlink{struct_emb_pattern___a4838c6d36990e7fcf958d1029f4a98aa}{stitch\_list}}-\/>\mbox{\hyperlink{struct_emb_array___ad43c3812e6d13e0518d9f8b8f463ffcf}{count}};\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00342}00342\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_emb_color__}{EmbColor}}\ color;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00343}00343\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_emb_stitch__}{EmbStitch}}\ st\ =\ pattern-\/>\mbox{\hyperlink{struct_emb_pattern___a4838c6d36990e7fcf958d1029f4a98aa}{stitch\_list}}-\/>\mbox{\hyperlink{struct_emb_array___a4d06a0868c91ec35c5c0e2e5661ddfa2}{stitch}}[i];}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00344}00344\ \ \ \ \ \ \ \ \ flag\ =\ st.\mbox{\hyperlink{struct_emb_stitch___ac8bf36fe0577cba66bccda3a6f7e80a4}{flags}};}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00345}00345\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (st.\mbox{\hyperlink{struct_emb_stitch___a0fd02fb9277ffcb35a75066ffe95e8c7}{color}}\ <\ pattern-\/>\mbox{\hyperlink{struct_emb_pattern___a557baab7c413f8c27729c6cbab8ba102}{thread\_list}}-\/>\mbox{\hyperlink{struct_emb_array___ad43c3812e6d13e0518d9f8b8f463ffcf}{count}})\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00346}00346\ \ \ \ \ \ \ \ \ \ \ \ \ color\ =\ pattern-\/>\mbox{\hyperlink{struct_emb_pattern___a557baab7c413f8c27729c6cbab8ba102}{thread\_list}}-\/>\mbox{\hyperlink{struct_emb_array___a87dbedfa066778e08311fe1bbb89b302}{thread}}[st.\mbox{\hyperlink{struct_emb_stitch___a0fd02fb9277ffcb35a75066ffe95e8c7}{color}}].\mbox{\hyperlink{struct_emb_thread___a5b70f2bf502560229b7fecf8984e33e9}{color}};}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00347}00347\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00348}00348\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00349}00349\ \ \ \ \ \ \ \ \ \ \ \ \ color\ =\ \mbox{\hyperlink{embroidery_8h_acd4ee62733d77dd5fb6d73cd5dab495d}{pecThreads}}[0].\mbox{\hyperlink{struct_emb_thread___a5b70f2bf502560229b7fecf8984e33e9}{color}};}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00350}00350\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00351}00351\ \ \ \ \ \ \ \ \ newColorCode\ =\ \mbox{\hyperlink{embroidery_8h_afa800b5fae861c97f7921b41dc96c755}{embThread\_findNearestThread}}(color,\ (\mbox{\hyperlink{struct_emb_thread__}{EmbThread}}*)\mbox{\hyperlink{embroidery_8h_acd4ee62733d77dd5fb6d73cd5dab495d}{pecThreads}},\ \mbox{\hyperlink{embroidery_8h_a0ddaecc4fc077a3db30ea5ffd20ac823}{pecThreadCount}});}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00352}00352\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (newColorCode\ !=\ colorCode)\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00353}00353\ \ \ \ \ \ \ \ \ \ \ \ \ colorCount++;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00354}00354\ \ \ \ \ \ \ \ \ \ \ \ \ colorCode\ =\ newColorCode;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00355}00355\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00356}00356\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (i\ <\ pattern-\/>stitch\_list-\/>count\ \&\&\ (flag\ ==\ st.\mbox{\hyperlink{struct_emb_stitch___ac8bf36fe0577cba66bccda3a6f7e80a4}{flags}}))\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00357}00357\ \ \ \ \ \ \ \ \ \ \ \ \ st\ =\ pattern-\/>\mbox{\hyperlink{struct_emb_pattern___a4838c6d36990e7fcf958d1029f4a98aa}{stitch\_list}}-\/>\mbox{\hyperlink{struct_emb_array___a4d06a0868c91ec35c5c0e2e5661ddfa2}{stitch}}[i];}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00358}00358\ \ \ \ \ \ \ \ \ \ \ \ \ count++;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00359}00359\ \ \ \ \ \ \ \ \ \ \ \ \ i++;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00360}00360\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00361}00361\ \ \ \ \ \ \ \ \ blockCount++;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00362}00362\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00363}00363\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00364}00364\ \ \ \ \ \mbox{\hyperlink{formats_8c_ab2256826c6ea8d2374fc94df46a7616f}{binaryWriteShort}}(file,\ (\textcolor{keywordtype}{short})blockCount);\ \textcolor{comment}{/*\ block\ count\ */}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00365}00365\ \ \ \ \ \mbox{\hyperlink{formats_8c_a760e806c16c1612a6b5ca5a26bc736d1}{binaryWriteUShort}}(file,\ 0xFFFF);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00366}00366\ \ \ \ \ \mbox{\hyperlink{formats_8c_ab2256826c6ea8d2374fc94df46a7616f}{binaryWriteShort}}(file,\ 0x00);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00367}00367\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00368}00368\ \ \ \ \ \mbox{\hyperlink{formats_8c_ab2256826c6ea8d2374fc94df46a7616f}{binaryWriteShort}}(file,\ 0x07);\ \textcolor{comment}{/*\ string\ length\ */}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00369}00369\ \ \ \ \ fwrite(\textcolor{stringliteral}{"{}CSewSeg"{}},\ 1,\ 7,\ file);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00370}00370\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00371}00371\ \ \ \ \ \textcolor{keywordflow}{if}\ (colorCount\ >\ 1000)\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00372}00372\ \ \ \ \ \ \ \ \ puts(\textcolor{stringliteral}{"{}Color\ count\ exceeds\ 1000\ this\ is\ likely\ an\ error.\ Truncating\ to\ 1000."{}});}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00373}00373\ \ \ \ \ \ \ \ \ colorCount\ =\ 1000;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00374}00374\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00375}00375\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00376}00376\ \ \ \ \ colorInfo\ =\ (\textcolor{keywordtype}{short}\ *)\ calloc(colorCount\ *\ 2,\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{short}));}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00377}00377\ \ \ \ \ colorCode\ =\ -\/1;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00378}00378\ \ \ \ \ blockCount\ =\ 0;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00379}00379\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ pattern-\/>\mbox{\hyperlink{struct_emb_pattern___a4838c6d36990e7fcf958d1029f4a98aa}{stitch\_list}}-\/>\mbox{\hyperlink{struct_emb_array___ad43c3812e6d13e0518d9f8b8f463ffcf}{count}};\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00380}00380\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_emb_color__}{EmbColor}}\ color;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00381}00381\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_emb_stitch__}{EmbStitch}}\ st;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00382}00382\ \ \ \ \ \ \ \ \ st\ =\ pattern-\/>\mbox{\hyperlink{struct_emb_pattern___a4838c6d36990e7fcf958d1029f4a98aa}{stitch\_list}}-\/>\mbox{\hyperlink{struct_emb_array___a4d06a0868c91ec35c5c0e2e5661ddfa2}{stitch}}[i];}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00383}00383\ \ \ \ \ \ \ \ \ j\ =\ i;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00384}00384\ \ \ \ \ \ \ \ \ flag\ =\ st.\mbox{\hyperlink{struct_emb_stitch___ac8bf36fe0577cba66bccda3a6f7e80a4}{flags}};}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00385}00385\ \ \ \ \ \ \ \ \ color\ =\ pattern-\/>\mbox{\hyperlink{struct_emb_pattern___a557baab7c413f8c27729c6cbab8ba102}{thread\_list}}-\/>\mbox{\hyperlink{struct_emb_array___a87dbedfa066778e08311fe1bbb89b302}{thread}}[st.\mbox{\hyperlink{struct_emb_stitch___a0fd02fb9277ffcb35a75066ffe95e8c7}{color}}].\mbox{\hyperlink{struct_emb_thread___a5b70f2bf502560229b7fecf8984e33e9}{color}};}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00386}00386\ \ \ \ \ \ \ \ \ newColorCode\ =\ \mbox{\hyperlink{embroidery_8h_afa800b5fae861c97f7921b41dc96c755}{embThread\_findNearestThread}}(color,\ (\mbox{\hyperlink{struct_emb_thread__}{EmbThread}}*)\mbox{\hyperlink{embroidery_8h_acd4ee62733d77dd5fb6d73cd5dab495d}{pecThreads}},\ \mbox{\hyperlink{embroidery_8h_a0ddaecc4fc077a3db30ea5ffd20ac823}{pecThreadCount}});}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00387}00387\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (newColorCode\ !=\ colorCode)\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00388}00388\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (colorInfoIndex+2\ >\ colorCount)\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00389}00389\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ puts(\textcolor{stringliteral}{"{}Ran\ out\ of\ memory\ for\ color\ info."{}});}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00390}00390\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00391}00391\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00392}00392\ \ \ \ \ \ \ \ \ \ \ \ \ colorInfo[colorInfoIndex++]\ =\ (short)blockCount;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00393}00393\ \ \ \ \ \ \ \ \ \ \ \ \ colorInfo[colorInfoIndex++]\ =\ (short)newColorCode;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00394}00394\ \ \ \ \ \ \ \ \ \ \ \ \ colorCode\ =\ newColorCode;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00395}00395\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00396}00396\ \ \ \ \ \ \ \ \ count\ =\ 0;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00397}00397\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (j\ <\ pattern-\/>stitch\_list-\/>count\ \&\&\ (flag\ ==\ st.\mbox{\hyperlink{struct_emb_stitch___ac8bf36fe0577cba66bccda3a6f7e80a4}{flags}}))\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00398}00398\ \ \ \ \ \ \ \ \ \ \ \ \ st\ =\ pattern-\/>\mbox{\hyperlink{struct_emb_pattern___a4838c6d36990e7fcf958d1029f4a98aa}{stitch\_list}}-\/>\mbox{\hyperlink{struct_emb_array___a4d06a0868c91ec35c5c0e2e5661ddfa2}{stitch}}[j];}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00399}00399\ \ \ \ \ \ \ \ \ \ \ \ \ count++;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00400}00400\ \ \ \ \ \ \ \ \ \ \ \ \ j++;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00401}00401\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00402}00402\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (flag\ \&\ \mbox{\hyperlink{embroidery_8h_aee551d17fffb6235cc7123499dbf7d65}{JUMP}})\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00403}00403\ \ \ \ \ \ \ \ \ \ \ \ \ stitchType\ =\ 1;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00404}00404\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00405}00405\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00406}00406\ \ \ \ \ \ \ \ \ \ \ \ \ stitchType\ =\ 0;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00407}00407\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00408}00408\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00409}00409\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{formats_8c_ab2256826c6ea8d2374fc94df46a7616f}{binaryWriteShort}}(file,\ (\textcolor{keywordtype}{short})stitchType);\ \textcolor{comment}{/*\ 1\ for\ jump,\ 0\ for\ normal\ */}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00410}00410\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{formats_8c_ab2256826c6ea8d2374fc94df46a7616f}{binaryWriteShort}}(file,\ (\textcolor{keywordtype}{short})colorCode);\ \textcolor{comment}{/*\ color\ code\ */}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00411}00411\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{formats_8c_ab2256826c6ea8d2374fc94df46a7616f}{binaryWriteShort}}(file,\ (\textcolor{keywordtype}{short})count);\ \textcolor{comment}{/*\ stitches\ in\ block\ */}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00412}00412\ \ \ \ \ \ \ \ \ j\ =\ i;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00413}00413\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (j\ <\ pattern-\/>stitch\_list-\/>count\ \&\&\ (flag\ ==\ st.\mbox{\hyperlink{struct_emb_stitch___ac8bf36fe0577cba66bccda3a6f7e80a4}{flags}}))\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00414}00414\ \ \ \ \ \ \ \ \ \ \ \ \ st\ =\ pattern-\/>\mbox{\hyperlink{struct_emb_pattern___a4838c6d36990e7fcf958d1029f4a98aa}{stitch\_list}}-\/>\mbox{\hyperlink{struct_emb_array___a4d06a0868c91ec35c5c0e2e5661ddfa2}{stitch}}[j];}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00415}00415\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{formats_8c_ab2256826c6ea8d2374fc94df46a7616f}{binaryWriteShort}}(file,\ (\textcolor{keywordtype}{short})(st.\mbox{\hyperlink{struct_emb_stitch___ae1a3958205104364b97172da19628db7}{x}}\ -\/\ bounds.\mbox{\hyperlink{struct_emb_rect___add22e8a42c753ce55b8c0bb8d00d8fa5}{left}}));}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00416}00416\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{formats_8c_ab2256826c6ea8d2374fc94df46a7616f}{binaryWriteShort}}(file,\ (\textcolor{keywordtype}{short})(st.\mbox{\hyperlink{struct_emb_stitch___ac696d7e3434ae029d180ef550e61af2d}{y}}\ +\ bounds.\mbox{\hyperlink{struct_emb_rect___a4b993166cfa980dd5e6a6509918ece68}{top}}));}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00417}00417\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00418}00418\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (j\ <\ pattern-\/>stitch\_list-\/>count\ )\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00419}00419\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{formats_8c_a760e806c16c1612a6b5ca5a26bc736d1}{binaryWriteUShort}}(file,\ 0x8003);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00420}00420\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00421}00421\ \ \ \ \ \ \ \ \ blockCount++;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00422}00422\ \ \ \ \ \ \ \ \ i\ =\ j;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00423}00423\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00424}00424\ \ \ \ \ \mbox{\hyperlink{formats_8c_ab2256826c6ea8d2374fc94df46a7616f}{binaryWriteShort}}(file,\ (\textcolor{keywordtype}{short})colorCount);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00425}00425\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ colorCount;\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00426}00426\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{formats_8c_ab2256826c6ea8d2374fc94df46a7616f}{binaryWriteShort}}(file,\ colorInfo[i\ *\ 2]);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00427}00427\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{formats_8c_ab2256826c6ea8d2374fc94df46a7616f}{binaryWriteShort}}(file,\ colorInfo[i\ *\ 2\ +\ 1]);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00428}00428\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00429}00429\ \ \ \ \ \mbox{\hyperlink{formats_8c_acaa069d2e820245be0f711415e2c297d}{binaryWriteInt}}(file,\ 0);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00430}00430\ \ \ \ \ \mbox{\hyperlink{embroidery__internal_8h_a596a4ab45910b13ea2809999de4c6950}{safe\_free}}(colorInfo);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00431}00431\ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00432}00432\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00433}00433\ \textcolor{keywordtype}{void}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00434}\mbox{\hyperlink{format__pes_8c_a88da481ff6657c0809aeed0f35c33e3c}{00434}}\ \mbox{\hyperlink{format__pes_8c_a88da481ff6657c0809aeed0f35c33e3c}{pesWriteEmbOneSection}}(\mbox{\hyperlink{struct_emb_pattern__}{EmbPattern}}*\ pattern,\ FILE*\ file)\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00435}00435\ \ \ \ \ \textcolor{comment}{/*\ TODO:\ pointer\ safety\ */}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00436}00436\ \ \ \ \ \textcolor{keywordtype}{float}\ x,\ width,\ height;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00437}00437\ \ \ \ \ \textcolor{keywordtype}{int}\ hoopHeight\ =\ 1800,\ hoopWidth\ =\ 1300;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00438}00438\ \ \ \ \ \mbox{\hyperlink{struct_emb_rect__}{EmbRect}}\ bounds;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00439}00439\ \ \ \ \ \mbox{\hyperlink{formats_8c_ab2256826c6ea8d2374fc94df46a7616f}{binaryWriteShort}}(file,\ 0x07);\ \textcolor{comment}{/*\ string\ length\ */}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00440}00440\ \ \ \ \ fwrite(\textcolor{stringliteral}{"{}CEmbOne"{}},\ 1,\ 7,\ file);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00441}00441\ \ \ \ \ bounds\ =\ \mbox{\hyperlink{embroidery_8h_a2c98adbce5554d426cc190eb7659e82c}{embPattern\_calcBoundingBox}}(pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00442}00442\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00443}00443\ \ \ \ \ \mbox{\hyperlink{embroidery__internal_8h_a72e798e33c5912c4a540cc09d4dbed42}{fpad}}(file,\ 0,\ 16);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00444}00444\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00445}00445\ \ \ \ \ \textcolor{comment}{/*\ AffineTransform\ */}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00446}00446\ \ \ \ \ x\ =\ 1.0;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00447}00447\ \ \ \ \ \mbox{\hyperlink{embroidery__internal_8h_a6afc577513abd5034e24efdcbdd7f9f5}{embInt\_write}}(file,\ \textcolor{stringliteral}{"{}."{}},\ \&x,\ \mbox{\hyperlink{embroidery__internal_8h_adf5a6371ed3ee9d649f92592139ac6a1}{EMB\_INT32\_LITTLE}});}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00448}00448\ \ \ \ \ x\ =\ 0.0;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00449}00449\ \ \ \ \ \mbox{\hyperlink{embroidery__internal_8h_a6afc577513abd5034e24efdcbdd7f9f5}{embInt\_write}}(file,\ \textcolor{stringliteral}{"{}."{}},\ \&x,\ \mbox{\hyperlink{embroidery__internal_8h_adf5a6371ed3ee9d649f92592139ac6a1}{EMB\_INT32\_LITTLE}});}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00450}00450\ \ \ \ \ x\ =\ 0.0;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00451}00451\ \ \ \ \ \mbox{\hyperlink{embroidery__internal_8h_a6afc577513abd5034e24efdcbdd7f9f5}{embInt\_write}}(file,\ \textcolor{stringliteral}{"{}."{}},\ \&x,\ \mbox{\hyperlink{embroidery__internal_8h_adf5a6371ed3ee9d649f92592139ac6a1}{EMB\_INT32\_LITTLE}});}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00452}00452\ \ \ \ \ x\ =\ 1.0;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00453}00453\ \ \ \ \ \mbox{\hyperlink{embroidery__internal_8h_a6afc577513abd5034e24efdcbdd7f9f5}{embInt\_write}}(file,\ \textcolor{stringliteral}{"{}."{}},\ \&x,\ \mbox{\hyperlink{embroidery__internal_8h_adf5a6371ed3ee9d649f92592139ac6a1}{EMB\_INT32\_LITTLE}});}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00454}00454\ \ \ \ \ width\ =\ bounds.\mbox{\hyperlink{struct_emb_rect___a74553efd0031b4ea1214293434719a5c}{right}}\ -\/\ bounds.\mbox{\hyperlink{struct_emb_rect___add22e8a42c753ce55b8c0bb8d00d8fa5}{left}};}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00455}00455\ \ \ \ \ height\ =\ bounds.\mbox{\hyperlink{struct_emb_rect___a80919e999819bed2a8571971e583212f}{bottom}}\ -\/\ bounds.\mbox{\hyperlink{struct_emb_rect___a4b993166cfa980dd5e6a6509918ece68}{top}};}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00456}00456\ \ \ \ \ x\ =\ (float)((width\ -\/\ hoopWidth)\ /\ 2);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00457}00457\ \ \ \ \ \mbox{\hyperlink{embroidery__internal_8h_a6afc577513abd5034e24efdcbdd7f9f5}{embInt\_write}}(file,\ \textcolor{stringliteral}{"{}."{}},\ \&x,\ \mbox{\hyperlink{embroidery__internal_8h_adf5a6371ed3ee9d649f92592139ac6a1}{EMB\_INT32\_LITTLE}});}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00458}00458\ \ \ \ \ x\ =\ (float)((height\ +\ hoopHeight)\ /\ 2);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00459}00459\ \ \ \ \ \mbox{\hyperlink{embroidery__internal_8h_a6afc577513abd5034e24efdcbdd7f9f5}{embInt\_write}}(file,\ \textcolor{stringliteral}{"{}."{}},\ \&x,\ \mbox{\hyperlink{embroidery__internal_8h_adf5a6371ed3ee9d649f92592139ac6a1}{EMB\_INT32\_LITTLE}});}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00460}00460\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00461}00461\ \ \ \ \ \mbox{\hyperlink{formats_8c_ab2256826c6ea8d2374fc94df46a7616f}{binaryWriteShort}}(file,\ 1);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00462}00462\ \ \ \ \ \mbox{\hyperlink{formats_8c_ab2256826c6ea8d2374fc94df46a7616f}{binaryWriteShort}}(file,\ 0);\ \textcolor{comment}{/*\ Translate\ X\ */}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00463}00463\ \ \ \ \ \mbox{\hyperlink{formats_8c_ab2256826c6ea8d2374fc94df46a7616f}{binaryWriteShort}}(file,\ 0);\ \textcolor{comment}{/*\ Translate\ Y\ */}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00464}00464\ \ \ \ \ \mbox{\hyperlink{formats_8c_ab2256826c6ea8d2374fc94df46a7616f}{binaryWriteShort}}(file,\ (\textcolor{keywordtype}{short})width);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00465}00465\ \ \ \ \ \mbox{\hyperlink{formats_8c_ab2256826c6ea8d2374fc94df46a7616f}{binaryWriteShort}}(file,\ (\textcolor{keywordtype}{short})height);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00466}00466\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00467}00467\ \ \ \ \ \mbox{\hyperlink{embroidery__internal_8h_a72e798e33c5912c4a540cc09d4dbed42}{fpad}}(file,\ 0,\ 8);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00468}00468\ \ \ \ \ \textcolor{comment}{/*WriteSubObjects(br,\ pes,\ SubBlocks);\ */}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00469}00469\ \}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00470}00470\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00471}00471\ \textcolor{keywordtype}{char}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00472}\mbox{\hyperlink{embroidery__internal_8h_a8a192471952e0860eb0d9eedefffe6e5}{00472}}\ \mbox{\hyperlink{format__pes_8c_a8a192471952e0860eb0d9eedefffe6e5}{writePes}}(\mbox{\hyperlink{struct_emb_pattern__}{EmbPattern}}*\ pattern,\ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *fileName,\ FILE*\ file)}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00473}00473\ \{}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00474}00474\ \ \ \ \ \textcolor{keywordtype}{int}\ pecLocation;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00475}00475\ \ \ \ \ \mbox{\hyperlink{embroidery_8h_a1845b61574f492a6dbef5fd6401ae4a2}{embPattern\_flipVertical}}(pattern);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00476}00476\ \ \ \ \ \mbox{\hyperlink{embroidery_8h_a91528c5fccf371c10f0933078899f751}{embPattern\_scale}}(pattern,\ 10.0);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00477}00477\ \ \ \ \ fwrite(\textcolor{stringliteral}{"{}\#PES0001"{}},\ 1,\ 8,\ file);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00478}00478\ \ \ \ \ \textcolor{comment}{/*\ WRITE\ PECPointer\ 32\ bit\ int\ */}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00479}00479\ \ \ \ \ \mbox{\hyperlink{formats_8c_acaa069d2e820245be0f711415e2c297d}{binaryWriteInt}}(file,\ 0x00);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00480}00480\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00481}00481\ \ \ \ \ \mbox{\hyperlink{formats_8c_ab2256826c6ea8d2374fc94df46a7616f}{binaryWriteShort}}(file,\ 0x01);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00482}00482\ \ \ \ \ \mbox{\hyperlink{formats_8c_ab2256826c6ea8d2374fc94df46a7616f}{binaryWriteShort}}(file,\ 0x01);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00483}00483\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00484}00484\ \ \ \ \ \textcolor{comment}{/*\ Write\ object\ count\ */}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00485}00485\ \ \ \ \ \mbox{\hyperlink{formats_8c_ab2256826c6ea8d2374fc94df46a7616f}{binaryWriteShort}}(file,\ 0x01);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00486}00486\ \ \ \ \ \mbox{\hyperlink{formats_8c_a760e806c16c1612a6b5ca5a26bc736d1}{binaryWriteUShort}}(file,\ 0xFFFF);\ \textcolor{comment}{/*\ command\ */}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00487}00487\ \ \ \ \ \mbox{\hyperlink{formats_8c_ab2256826c6ea8d2374fc94df46a7616f}{binaryWriteShort}}(file,\ 0x00);\ \textcolor{comment}{/*\ unknown\ */}}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00488}00488\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00489}00489\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_a88da481ff6657c0809aeed0f35c33e3c}{pesWriteEmbOneSection}}(pattern,\ file);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00490}00490\ \ \ \ \ \mbox{\hyperlink{format__pes_8c_a084b69b38d9bb8f211f2899be34ff889}{pesWriteSewSegSection}}(pattern,\ file);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00491}00491\ }
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00492}00492\ \ \ \ \ pecLocation\ =\ ftell(file);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00493}00493\ \ \ \ \ fseek(file,\ 0x08,\ SEEK\_SET);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00494}00494\ \ \ \ \ fputc((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char})(pecLocation\ \&\ 0xFF),\ file);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00495}00495\ \ \ \ \ fputc((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char})(pecLocation\ >>\ 8)\ \&\ 0xFF,\ file);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00496}00496\ \ \ \ \ fputc((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char})(pecLocation\ >>\ 16)\ \&\ 0xFF,\ file);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00497}00497\ \ \ \ \ fseek(file,\ 0x00,\ SEEK\_END);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00498}00498\ \ \ \ \ \mbox{\hyperlink{embroidery__internal_8h_a00b19aaefbca1efbe3ad60462467dc4e}{writePecStitches}}(pattern,\ file,\ fileName);}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00499}00499\ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{\Hypertarget{format__pes_8c_source_l00500}00500\ \}}

\end{DoxyCode}
