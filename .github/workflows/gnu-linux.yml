name: GNU/Linux

on: [push]

jobs:
  build-linux:
    runs-on: ubuntu-latest
    steps:
    - name: build the linux version
      run: |
        sudo apt-get update
        sudo apt-get install libglew-dev cmake git build-essential libxrandr-dev libxinerama-dev libgl1-mesa-dev libxcursor-dev libxi-dev
        git clone https://github.com/embroidermodder/embroidermodder
        cd embroidermodder
        bash build.sh
        cp -r assets/ build
    - name: archive production artifacts
      uses: actions/upload-artifact@v3
      with:
        name: embroidermodder-2.0.0-alpha-linux
        path: embroidermodder/build
